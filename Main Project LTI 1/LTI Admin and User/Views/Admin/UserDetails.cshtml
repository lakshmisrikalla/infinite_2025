@model LTI.Models.UserDetailsViewModel
@{ ViewBag.Title = "User Details";
    Layout = "~/Views/Admin/AdminLayout.cshtml";
    }
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="container mt-4">
    <div class="card shadow-sm mb-3">
        <div class="card-header bg-dark text-white"><h4 class="mb-0">Profile</h4></div>
        <div class="card-body">
            <div><strong>Name:</strong> @Model.FullName</div>
            <div><strong>Email:</strong> @Model.Email</div>
            <div><strong>Username:</strong> @Model.Username</div>
            <div><strong>Phone:</strong> @Model.Phone</div>
            <div><strong>Status:</strong> @Model.UserStatus</div>
            <div><strong>Active:</strong> @(Model.IsActive ? "Yes" : "No")</div>
            <div><strong>Gender:</strong> @Model.Gender</div>
            <div><strong>DOB:</strong> @(Model.DateOfBirth?.ToString("yyyy-MM-dd") ?? "-")</div>
            <div><strong>Address:</strong> @Model.Address</div>
        </div>
    </div>

    <div class="card shadow-sm mb-3">
        <div class="card-header bg-secondary text-white"><h5 class="mb-0">Policies</h5></div>
        <div class="card-body table-responsive">
            <table class="table table-sm table-striped">
                <thead><tr><th>Policy</th><th>Type</th><th>Client</th><th>Start</th><th>End</th><th>Status</th><th>Payment</th></tr></thead>
                <tbody>
                    @foreach (var p in Model.Policies)
                    {
        <tr>
            <td>@p.PolicyName</td>
            <td>@p.PolicyType</td>
            <td>@p.ClientName</td>
            <td>@p.StartDate.ToString("yyyy-MM-dd")</td>
            <td>@p.EndDate.ToString("yyyy-MM-dd")</td>
            <td>@p.Status</td>
            <td>@p.PaymentStatus</td>
        </tr>}
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm mb-3">
                <div class="card-header bg-info text-dark"><h5 class="mb-0">Payments</h5></div>
                <div class="card-body table-responsive">
                    <table class="table table-sm">
                        <thead><tr><th>ID</th><th>Policy</th><th>Amount</th><th>Mode</th><th>Status</th><th>Paid At</th></tr></thead>
                        <tbody>
                            @foreach (var x in Model.Payments)
                            {
                <tr>
                    <td>@x.PaymentID</td>
                    <td>@x.UserPolicyID</td>
                    <td>@x.Amount</td>
                    <td>@x.Mode</td>
                    <td>@x.Status</td>
                    <td>@x.PaidAt</td>
                </tr>}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm mb-3">
                <div class="card-header bg-warning text-dark"><h5 class="mb-0">Renewals</h5></div>
                <div class="card-body table-responsive">
                    <table class="table table-sm">
                        <thead><tr><th>ID</th><th>Policy</th><th>Requested</th><th>Approved</th><th>Amount</th><th>Status</th></tr></thead>
                        <tbody>
                            @foreach (var r in Model.Renewals)
                            {
                <tr>
                    <td>@r.RenewalID</td>
                    <td>@r.UserPolicyID</td>
                    <td>@r.RequestedAt</td>
                    <td>@(r.ApprovedAt?.ToString() ?? "-")</td>
                    <td>@r.Amount</td>
                    <td>@r.Status</td>
                </tr>}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow-sm mb-3">
        <div class="card-header bg-danger text-white"><h5 class="mb-0">Claims</h5></div>
        <div class="card-body table-responsive">
            <table class="table table-sm">
                <thead><tr><th>ID</th><th>Policy</th><th>Date</th><th>Type</th><th>Reason</th><th>Amount</th><th>Status</th></tr></thead>
                <tbody>
                    @foreach (var c in Model.Claims)
                    {
        <tr>
            <td>@c.ClaimID</td>
            <td>@c.UserPolicyID</td>
            <td>@c.ClaimDate</td>
            <td>@c.ClaimType</td>
            <td>@c.Reason</td>
            <td>@c.ClaimedAmount</td>
            <td>@c.Status</td>
        </tr>}
                </tbody>
            </table>
        </div>
    </div>

    <div class="card shadow-sm mb-4">
        <div class="card-header bg-light"><h5 class="mb-0">Documents</h5></div>
        <div class="card-body table-responsive">
            <table class="table table-sm">
                <thead><tr><th>ID</th><th>Owner</th><th>Type</th><th>File</th><th>Verified</th><th>Uploaded</th></tr></thead>
                <tbody>
                    @foreach (var d in Model.Documents)
                    {
        <tr>
            <td>@d.DocumentID</td>
            <td>@d.OwnerType #@d.OwnerID</td>
            <td>@d.DocumentType</td>
            <td>@d.FilePath</td>
            <td>@(d.IsVerified ? "Yes":"No")</td>
            <td>@d.UploadedAt</td>
        </tr>}
                </tbody>
            </table>
        </div>
    </div>
</div>
